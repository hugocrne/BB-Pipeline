# BB-Pipeline - Configuration clang-format
# Style C++20 moderne et consistant

---
BasedOnStyle: LLVM
Language: Cpp
Standard: c++20

# Indentation
IndentWidth: 4
TabWidth: 4
UseTab: Never
IndentCaseLabels: true
IndentPPDirectives: BeforeHash
IndentWrappedFunctionNames: false

# Largeur et breaks
ColumnLimit: 100
BreakBeforeBraces: Attach
AlwaysBreakAfterReturnType: None
AlwaysBreakAfterDefinitionReturnType: None
AlwaysBreakTemplateDeclarations: Yes
BreakConstructorInitializers: BeforeColon
BreakInheritanceList: BeforeColon

# Espacements
SpaceBeforeParens: ControlStatements
SpaceInEmptyParentheses: false
SpacesInParentheses: false
SpacesInSquareBrackets: false
SpaceAfterCStyleCast: false
SpaceBeforeAssignmentOperators: true
SpaceBeforeRangeBasedForLoopColon: true

# Alignement
AlignAfterOpenBracket: Align
AlignConsecutiveAssignments: false
AlignConsecutiveDeclarations: false
AlignTrailingComments: true
AlignOperands: true

# Inclusions
SortIncludes: true
IncludeBlocks: Regroup
IncludeCategories:
  # System headers
  - Regex: '^<[^/]+>'
    Priority: 1
  # C++ standard library
  - Regex: '^<[^/>]+/[^/>]+>'
    Priority: 2
  # Third-party libraries
  - Regex: '^<[^/>]+\.[^/>]+>'
    Priority: 3
  # Project headers
  - Regex: '^"bbp/'
    Priority: 4
  # Local headers
  - Regex: '^"'
    Priority: 5

# Fonctions et classes
AllowShortFunctionsOnASingleLine: Inline
AllowShortIfStatementsOnASingleLine: WithoutElse
AllowShortLoopsOnASingleLine: true
AllowShortBlocksOnASingleLine: Empty
AllowShortCaseLabelsOnASingleLine: true

# Constructeurs
ConstructorInitializerAllOnOneLineOrOnePerLine: true
ConstructorInitializerIndentWidth: 4

# Commentaires
ReflowComments: true
SpacesBeforeTrailingComments: 2

# Formatage spécifique
BinPackArguments: false
BinPackParameters: false
ExperimentalAutoDetectBinPacking: false

# Namespace
CompactNamespaces: false
NamespaceIndentation: None

# Pointeurs et références
PointerAlignment: Left
ReferenceAlignment: Left

# Autres options modernes C++20
AllowAllArgumentsOnNextLine: true
AllowAllParametersOfDeclarationOnNextLine: false
InsertTrailingCommas: Wrapped

# Fix includes
SortUsingDeclarations: true
FixNamespaceComments: true

# Penalty settings pour un meilleur formatage
PenaltyBreakAssignment: 2
PenaltyBreakBeforeFirstCallParameter: 19
PenaltyBreakComment: 300
PenaltyBreakFirstLessLess: 120
PenaltyBreakString: 1000
PenaltyExcessCharacter: 1000000
PenaltyReturnTypeOnItsOwnLine: 60